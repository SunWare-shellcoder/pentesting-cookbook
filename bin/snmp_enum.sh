#!/bin/bash

if [[ -z $1 ]]; then
    echo "Usage: $0 192.168.1.0/24"
    exit 1
fi

for ip in $(prips $1); do
    echo $ip;
    for str in $(cat /usr/share/seclists/Discovery/SNMP/common-snmp-community-strings-onesixtyone.txt); do
        if snmpwalk -OsS -v 1 -c $str $ip &>/dev/null; then
            echo $str
            break
        fi
    done
done
